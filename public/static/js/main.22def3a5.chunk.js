(this.webpackJsonptaskman=this.webpackJsonptaskman||[]).push([[0],{253:function(e,t,n){},275:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},311:function(e,t,n){},335:function(e,t){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},343:function(e,t,n){},344:function(e,t,n){},352:function(e,t,n){},353:function(e,t,n){},354:function(e,t,n){},461:function(e,t,n){},462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},465:function(e,t,n){},466:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(17),s=n.n(r),i=(n(253),n(98)),o=n(13),l=n(31),d=n(22),u=(n(275),n(7)),j=n(8),b=n(9),m=(n(278),n(4)),h=n(6),f=n.n(h),p=n(10),O=n(23),x=n(99),v="/api/",k=n.n(x).a.create({withCredentials:!0}),g=function(e,t){return N(e,"GET",t)},C=function(e,t){return N(e,"POST",t)},y=function(e,t){return N(e,"PUT",t)},w=function(e,t){return N(e,"DELETE",t)};function N(e){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(f.a.mark((function e(t){var n,c,a,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"GET",c=r.length>2&&void 0!==r[2]?r[2]:null,e.prev=2,e.next=5,k({url:"".concat(v).concat(t),method:n,data:c,params:"GET"===n?c:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(c)),console.dir(e.t0),e.t0.response&&e.t0.response.status,e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S="user/";function D(){return(D=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(S);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("err:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function T(){return(T=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(S+t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("err:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function E(){return(E=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(S+t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error from userService - ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function A(){return(A=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t._id){e.next=5;break}return e.next=4,y(S+t._id,t);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,C(S,t);case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log("err:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function B(){return(B=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("auth/login",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("err:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function M(){return(M=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C("auth/logout");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("err:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var L={query:function(){return D.apply(this,arguments)},getUserById:function(e){return T.apply(this,arguments)},deleteUser:function(e){return E.apply(this,arguments)},saveUser:function(e){return A.apply(this,arguments)},getEmptyUser:function(){return{name:"",username:"",password:""}},storage:{saveUserToStorage:function(e){sessionStorage.setItem("loggedinUser",JSON.stringify(e))},loadUserFromStorage:function(){return JSON.parse(sessionStorage.getItem("loggedinUser"))}},login:function(e){return B.apply(this,arguments)},logout:function(){return M.apply(this,arguments)}};function I(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.login(e);case 2:if(c=t.sent){t.next=5;break}return t.abrupt("return","Incorrect username or password");case 5:L.storage.saveUserToStorage(c),n({type:"LOAD_USER",user:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function R(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.saveUser(e);case 2:if(t.sent){t.next=5;break}return t.abrupt("return","Username - '".concat(e.username,"' is already taken."));case 5:L.storage.saveUserToStorage(e),n({type:"LOAD_USER",user:e});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function P(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.saveUser(e);case 2:c=t.sent,L.storage.saveUserToStorage(c),n({type:"UPDATE_USER",updatedUser:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var z=n.p+"static/media/taskman-loader.d5d52ecc.svg",U=(n(279),n(28)),F=n(1);function W(e){var t,n,a=e.profileOp,r=a.isProfile,s=a.setIsProfile,i=Object(o.c)(),l=Object(o.d)((function(e){return e.userReducer.user})),d=Object(O.a)(),h=d.register,x=d.handleSubmit,v=d.reset,k=Object(c.useState)(!0),g=Object(u.a)(k,2),C=g[0],y=g[1],w=Object(c.useState)(!1),N=Object(u.a)(w,2),_=N[0],S=N[1],D=Object(c.useState)(null),T=Object(u.a)(D,2),E=T[0],A=T[1],B=Object(c.useRef)();t=B,n=function(){return s(!1)},Object(c.useEffect)((function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n(e)};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[t,n]);var M=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(null),S(!0),n={username:t.loginUsername,password:t.loginPass},e.next=5,i(I(n));case 5:(c=e.sent)&&A(c),S(!1),v();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(p.a)(f.a.mark((function e(t){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(null),S(!0),n={name:t.loginFullname,username:t.loginUsername,password:t.loginPass,tasks:[]},e.next=5,i(R(n));case 5:c=e.sent,S(!1),c&&A(c),s(!0),v();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return _?Object(F.jsx)("div",{className:"profile-loader login-form",children:Object(F.jsx)("img",{src:z,alt:""})}):Object(F.jsxs)(F.Fragment,{children:[l&&Object(F.jsxs)("section",{ref:B,className:"user-menu",style:r?{maxWidth:"100%"}:{maxWidth:"0"},children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("h3",{children:"Profile"}),Object(F.jsx)("p",{onClick:function(){return s(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("div",{children:[Object(F.jsx)(U.a,{name:l.name,size:"40",round:!0}),Object(F.jsx)("p",{children:l.username})]}),Object(F.jsxs)("div",{className:"hide-overflow",children:[Object(F.jsx)("p",{children:l.tasks.length?"Tasks:":"No tasks assigned."}),l.tasks.length?Object(F.jsxs)("p",{children:[l.tasks.length," tasks."]}):null,Object(F.jsxs)("ul",{children:[l.tasks?null:Object(F.jsx)("li",{children:l.tasks.length}),l.tasks.length?l.tasks.map((function(e){return Object(F.jsx)("li",{children:e.title},e._id)})):null]})]}),Object(F.jsx)("div",{children:Object(F.jsx)("button",{onClick:function(){i(function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.logout();case 2:L.storage.saveUserToStorage(null),t({type:"LOAD_USER",user:null});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s(!1)},children:"Logout"})})]}),!l&&Object(F.jsxs)("section",{ref:B,className:"login-form",style:r?{maxWidth:"100%"}:{maxWidth:"0"},children:[Object(F.jsx)("h3",{children:C?"Login":"Signup"}),C&&Object(F.jsxs)("form",{onSubmit:x(M),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"username"},h("loginUsername"))),Object(F.jsx)("input",Object(m.a)({type:"password",autoComplete:"off",placeholder:"password"},h("loginPass"))),E&&Object(F.jsx)("p",{className:"fail-login",children:E}),Object(F.jsx)("button",{children:"Login"})]}),!C&&Object(F.jsxs)("form",{onSubmit:x(P),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"fullname"},h("loginFullname"))),Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"username"},h("loginUsername"))),Object(F.jsx)("input",Object(m.a)({type:"password",autoComplete:"off",placeholder:"password"},h("loginPass"))),Object(F.jsx)("button",{children:"Signup"})]}),C&&Object(F.jsxs)("p",{onClick:function(){return y(!C)},children:["Not a registered user?",Object(F.jsx)("br",{}),"Click here to sign-up."]}),!C&&Object(F.jsxs)("p",{onClick:function(){return y(!C)},children:["Registered user?",Object(F.jsx)("br",{}),"Click here to login."]})]})]})}function V(){var e=Object(o.c)(),t=Object(c.useState)(!1),n=Object(u.a)(t,2),a=n[0],r=n[1],s=L.storage.loadUserFromStorage();Object(c.useEffect)((function(){s&&e(I(s))}),[]);var i={setIsProfile:r,isProfile:a};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsxs)("nav",{className:"app-header sub-container",children:[Object(F.jsx)(l.b,{className:"link",to:"/boards",children:Object(F.jsx)(j.a,{icon:b.j})}),Object(F.jsx)(l.b,{className:"link",to:"/boards",children:"Taskman"}),Object(F.jsx)("button",{className:"link",onClick:function(){return r(!a)},children:Object(F.jsx)(j.a,{icon:b.v})})]}),Object(F.jsx)(W,{profileOp:i})]})}var q=n(11),Y={getRandomInt:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)},makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<e;c++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},filter:function(e,t){return e=e.toLocaleLowerCase(),t.filter((function(t){return t.name.toLocaleLowerCase().includes(e)||t.phone.toLocaleLowerCase().includes(e)||t.email.toLocaleLowerCase().includes(e)}))},sort:function(e){return e.sort((function(e,t){return e.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?-1:e.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?1:0}))},debounce:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];var s=function(){clearTimeout(t),e.apply(void 0,a)};clearTimeout(t),t=setTimeout(s,n)}}};var G="board/",K={query:function(){return Q.apply(this,arguments)},getBoardById:function(e){return Z.apply(this,arguments)},deleteBoard:function(e){return $.apply(this,arguments)},saveBoard:function(e){return ee.apply(this,arguments)},getEmptyBoard:function(){return{title:"",members:[],cards:[{_id:Y.makeId(),title:"Your first card!",tasks:[]}],activity:[],background:[],labels:X,images:H,description:""}},getEmptyCard:function(){return{_id:Y.makeId(),title:"",tasks:[]}},updateCard:function(e,t,n){if("number"!==typeof e){var c=t.tasks.findIndex((function(t){return t._id===e._id}));t.tasks.splice(c,1,e)}else t.tasks.splice(e,1);return te(t,n)},updateBoard:te,getEmptyTask:function(){return{_id:Y.makeId(),title:"",desc:"",createdAt:Date.now(),labels:[],dueDate:"",activity:[],members:[],isWithAttachment:!1,cover:"",checklists:[],doneAt:"",attachments:[],comments:[]}},getCoverColors:function(){return J}},H=["https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621015877/taskman/jared-verdi-PNKwdJ8WetM-unsplash_aabpzg.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016569/taskman/zsofia-szalay-TbrzJbcacnQ-unsplash_bst628.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016567/taskman/the-nigmatic-lUnLaEWzcz8-unsplash_vcfxju.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016565/taskman/steve-johnson-274PPmlOjyQ-unsplash_twaarr.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016564/taskman/omer-salom-LoijtQXXNhs-unsplash_w6cs4h.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016564/taskman/jonny-gios-h_XcnLbDc_0-unsplash_lhi5si.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016564/taskman/inaki-del-olmo-IRCzpl2YYKE-unsplash_tpzeyw.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016564/taskman/joel-holland-TRhGEGdw-YY-unsplash_dqapzs.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016558/taskman/ian-schneider-TamMbr4okv4-unsplash_r85bnj.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016557/taskman/mohammad-alizade-CDu0x1Aiils-unsplash_jqizxr.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016556/taskman/mohammad-alizade-62t_kKa2YlA-unsplash_rbytvb.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016555/taskman/mohamed-rishfaan-ir_65wcK_DA-unsplash_qgfljs.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016554/taskman/ines-mills-TGs0tHMk4eg-unsplash_bkqpbf.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016551/taskman/erol-ahmed-aIYFR0vbADk-unsplash_g8hmym.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016551/taskman/duy-thanh-nguyen-ZeoSVUcWjfY-unsplash_z4qs2l.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016550/taskman/fransiskus-filbert-mangundap-C9hqYikX34w-unsplash_mqj9zi.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016548/taskman/arpad-spodni-KbKQY_LjmuE-unsplash_fqlcyv.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016546/taskman/dave-hoefler-PkQH-GHEp0A-unsplash_jfurlc.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016544/taskman/fabrice-villard-Du41jIaI5Ww-unsplash_kqcna2.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016542/taskman/estee-janssens-aQfhbxailCs-unsplash_slddqg.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016542/taskman/angel-luciano-XQJ0BBSvTs0-unsplash_d7advt.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016538/taskman/callum-wale-V8j3F6Ik9_s-unsplash_clbkte.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016537/taskman/braden-jarvis-prSogOoFmkw-unsplash_sgtmnd.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016534/taskman/danielle-macinnes-IuLgi9PWETU-unsplash_u9xmg7.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621016533/taskman/carolyn-christine-D7bmnvGJA2Q-unsplash_oz27jz.jpg","https://res.cloudinary.com/dtu0lzwpw/image/upload/v1621018122/taskman/vlad-kutepov-WYJ9c7uSdnU-unsplash_c2g6gy.jpg"],X=[{_id:Y.makeId(),desc:"Copy Request",color:"#61BD4F"},{_id:Y.makeId(),desc:"One more step",color:"#F2D600"},{_id:Y.makeId(),desc:"Design Team",color:"#FF9F1A"},{_id:Y.makeId(),desc:"Product Marketing",color:"#EB5A46"},{_id:Y.makeId(),desc:"Trello Tip",color:"#C377E0"},{_id:Y.makeId(),desc:"Help",color:"#0079BF"},{_id:Y.makeId(),desc:"Priority",color:"#51E898"}],J=["#7bc86c","#f5dd29","#ffaf3f","#ef7564","#cd8de5","#5ba4cf","#29cce5","#6deca9","#ff8ed4","#172b4d"];function Q(){return(Q=Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(G);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("err:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function Z(){return(Z=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g(G+t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("err:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function $(){return($=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(G+t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log("Error from boardService - ",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ee(){return(ee=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!t._id){e.next=5;break}return e.next=4,y(G+t._id,t);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,C(G,t);case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log("err:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function te(e,t){if("number"!==typeof e){var n=t.cards.findIndex((function(t){return t._id===e._id}));t.cards.splice(n,1,e)}else t.cards.splice(e,1);return Object(m.a)(Object(m.a)({},t),{},{cards:Object(q.a)(t.cards)})}function ne(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.query(e);case 2:c=t.sent,n({type:"SET_BOARDS",boards:c});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ce(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.saveBoard(e);case 2:return c=t.sent,e._id?n({type:"UPDATE_BOARD",updatedBoard:c}):n({type:"ADD_BOARD",board:c}),t.abrupt("return",c);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function ae(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=null,!e){t.next=5;break}return t.next=4,K.getBoardById(e);case 4:c=t.sent;case 5:n({type:"SET_BOARD",board:c});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function re(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){var c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.deleteBoard(e);case 2:if(c=t.sent){t.next=5;break}return t.abrupt("return");case 5:return n({type:"REMOVE_BOARD",boardId:e}),t.abrupt("return",c.msg);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function se(e){return function(){var t=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n({type:"UPDATE_BACKGROUND",background:e});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var ie=n(40),oe=(n(311),n(44)),le=n.n(oe),de=n(224),ue=n.n(de),je=function(){var e,t={setup:function(){e=ue()("")},on:function(n,c){e||t.setup(),e.on(n,c)},off:function(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e||t.setup(),c?e.off(n,c):e.removeAllListeners(n)},emit:function(n,c){e||t.setup(),e.emit(n,c)},terminate:function(){e=null}};return t}();function be(e){var t=e.card,n=e.cardPreviewOp,a=Object(o.c)(),r=Object(O.a)(),s=r.register,i=r.handleSubmit,l=r.reset,d=Object(o.d)((function(e){return e.boardReducer.currBoard})),h=Object(c.useState)(t.tasks),x=Object(u.a)(h,2),v=x[0],k=x[1],g=Object(c.useState)(null),C=Object(u.a)(g,2),y=C[0],w=C[1],N=Object(c.useState)(!1),_=Object(u.a)(N,2),S=_[0],D=_[1],T=K.getEmptyTask();Object(c.useEffect)((function(){D(!S)}),[d]);var E=function(e,t){e.stopPropagation(),n.setIsDescShown(t)},A=function(e,n){e.stopPropagation(),n.doneAt?n.doneAt="":n.doneAt=Date.now(),je.emit("task to-update-task",{card:t,task:n});var c=K.updateCard(n,t,d);a(ce(c))},B=function(){var e=Object(p.a)(f.a.mark((function e(c){var r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.title=c.newTask,v.push(T),k(v),r=K.updateCard(T,t,d),a(ce(r)),w(!y),s={task:T,card:t._id},je.emit("task to-add-task",s),n.addActivity("Guest","added","task",t.title),T=K.getEmptyTask(),l();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(p.a)(f.a.mark((function e(n){var c,r,s,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.destination){e.next=2;break}return e.abrupt("return");case 2:return c=Array.from(v),r=c.splice(n.source.index,1),s=Object(u.a)(r,1),i=s[0],c.splice(n.destination.index,0,i),t.tasks=c,k(t.tasks),e.next=9,K.updateBoard(t,d);case 9:o=e.sent,a(ce(o));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return e.doneAt?"#61BD4F":e.dueDate>Date.now()?"#F4F5F7":"#ec9488"},I=function(e){return e.doneAt?"white":e.dueDate>Date.now()?"#8b95a7":"white"};return Object(F.jsx)("div",{className:"board-card",onClick:function(){return n.setCurrCard(t)},children:Object(F.jsxs)("div",{className:"hide-overflow",children:[Object(F.jsxs)("div",{className:"title",children:[Object(F.jsx)("form",{onBlur:i((function(e){if(e.cardTitle){t.title=e.cardTitle.replace(/'|"/g,"");var n=K.updateBoard(t,d);je.emit("card to-update-card",t),je.emit("card to-update-card-title",t),D(!1),a(ce(n))}})),children:Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"text",required:!0,onKeyDown:function(e){"Enter"===e.key&&e.preventDefault(),e.key}},s("cardTitle")),{},{defaultValue:t.title,placeholder:"Card name",autoComplete:"off"}))}),Object(F.jsx)("div",{onClick:function(e){return n.openCardModal(e,t)},className:"manage-card",children:Object(F.jsx)("p",{children:"\u22ee"})})]}),Object(F.jsx)(ie.a,{onDragEnd:M,children:Object(F.jsx)(ie.c,{droppableId:"tasks",children:function(e){return Object(F.jsxs)("ul",Object(m.a)(Object(m.a)({},e.droppableProps),{},{ref:e.innerRef,className:"tasks-container",children:[v.map((function(e,t){return Object(F.jsx)(ie.b,{draggableId:e._id,index:t,children:function(t){return Object(F.jsxs)("li",Object(m.a)(Object(m.a)(Object(m.a)({onClick:function(){return n.setCurrTask(e)}},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,className:"card-task",children:[e.cover?e.cover.includes("#")?Object(F.jsx)("div",{className:"task-cover-color",style:{backgroundColor:"".concat(e.cover)}}):Object(F.jsx)("div",{className:"task-cover-img",style:{backgroundImage:"url(".concat(e.cover,")")}}):null,Object(F.jsxs)("div",{className:"label-color-to-preview-container",children:[!n.isDescShown&&e.labels.map((function(e,t){return Object(F.jsx)("label",{className:"label-color-to-preview",style:{backgroundColor:"".concat(e.color)},onClick:function(e){return E(e,!0)}},t)})),n.isDescShown&&e.labels.map((function(e,t){return Object(F.jsx)("label",{className:"label-color-open-to-preview",style:{backgroundColor:"".concat(e.color)},onClick:function(e){return E(e,!1)},children:e.desc},t)}))]}),Object(F.jsx)("span",{children:e.title}),Object(F.jsxs)("section",{className:"container-of-all",children:[Object(F.jsxs)("section",{className:"buttom-preview-info",children:[e.dueDate?e.doneAt?Object(F.jsxs)("div",{className:"due-date-to-preview",style:{color:I(e),backgroundColor:L(e)},onClick:function(t){return A(t,e)},children:[Object(F.jsx)(j.a,{className:"icon font-awesome-clock",icon:b.g}),Object(F.jsx)(j.a,{className:"icon font-awesome-check-square",icon:b.d}),Object(F.jsx)(le.a,{format:"MMM D",withTitle:!0,children:e.dueDate})]}):Object(F.jsxs)("div",{className:"due-date-to-preview",style:{color:I(e),backgroundColor:L(e)},onClick:function(t){return A(t,e)},children:[Object(F.jsx)(j.a,{className:"icon font-awesome-clock",icon:b.g}),Object(F.jsx)(j.a,{className:"icon font-awesome-home",icon:b.q}),Object(F.jsx)(le.a,{format:"MMM D",withTitle:!0,children:e.dueDate})]}):null,e.attachments.length?Object(F.jsxs)("div",{children:[Object(F.jsx)(j.a,{icon:b.n})," ",e.attachments.length," "]}):null,e.desc?Object(F.jsx)("div",{children:Object(F.jsx)(j.a,{icon:b.a})}):null,e.comments.length?Object(F.jsxs)("div",{children:[Object(F.jsx)(j.a,{icon:b.i}),e.comments.length]}):null,!e.checklists.length||e.checklists.reduce((function(e,t){return t.list.length+e}),0)<=0?null:Object(F.jsxs)("p",{children:[" ",Object(F.jsx)(j.a,{icon:b.k}),e.checklists.reduce((function(e,t){return e+t.list.reduce((function(e,t){return t.isChecked+e}),0)}),0),"/",e.checklists.reduce((function(e,t){return t.list.length+e}),0)]})]}),e.members.length?Object(F.jsx)("div",{className:"avatar-card-preview",children:e.members.map((function(e,t){return Object(F.jsx)(U.a,{name:e.name,size:"30",round:!0},t)}))}):null]})]}),e._id)}},e._id)})),e.placeholder]}))}})}),!y&&"No search results."!==t.title&&Object(F.jsxs)("button",{className:"add-task-btn",onClick:function(){return w(!y)},children:[Object(F.jsx)(j.a,{icon:b.p})," Add task"]}),y&&Object(F.jsxs)("form",{className:"add-task-container",onSubmit:i(B),children:[Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"text",id:"title",name:"title",autoComplete:"off",required:!0},s("newTask")),{},{placeholder:"Enter a title for this card",defaultValue:T.title})),Object(F.jsxs)("div",{className:"add-task-btns",children:[Object(F.jsx)("button",{children:"Add Task"}),Object(F.jsx)("button",{onClick:function(){return w(!y)},className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]})]})]})})}window.socketService=je;n(338),n(339);function me(e){var t=e.labelEditModal,n=e.currBoard,c=Object(o.c)(),a=Object(O.a)(),r=a.register,s=a.handleSubmit;return Object(F.jsxs)("div",{className:"label-edit-modal",children:[Object(F.jsxs)("div",{className:"labels-edit-modal-header",children:[Object(F.jsx)("button",{onClick:function(){return e.setLabelEditModal(!1)},children:Object(F.jsx)(j.a,{icon:b.e})}),Object(F.jsx)("h3",{children:"Edit Label"}),Object(F.jsx)("button",{className:"btn-close-icon",onClick:function(){return e.setLabelModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("form",{onSubmit:s((function(a){return r=a,t.desc=r.labelName,t.color=r.labelColor,e.setLabelModal(t),c(ce(Object(m.a)({},n))),void e.setLabelEditModal(!1);var r})),children:[Object(F.jsx)("p",{children:"Name:"}),Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"text",name:"edit-name",autoComplete:"off",defaultValue:t.desc},r("labelName")),{},{onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}})),Object(F.jsx)("p",{children:"Color:"}),Object(F.jsx)("input",Object(m.a)({type:"color",name:"edit-color",className:"edit-color",defaultValue:t.color},r("labelColor"))),Object(F.jsx)("button",{children:"Save"})]})]})}n(340);function he(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(o.d)((function(e){return e.boardReducer.currBoard})),i=s.labels;return Object(F.jsxs)("section",{children:[Object(F.jsxs)("div",{className:"label-modal",style:a?{maxWidth:0,border:"none",visibility:"visible"}:{maxWidth:"280px"},children:[Object(F.jsxs)("div",{className:"modal-header",children:[Object(F.jsx)("h3",{children:"Labels"}),Object(F.jsx)("p",{onClick:function(){return e.setLabelModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("ul",{className:"labels-container",children:i.map((function(t,n){return Object(F.jsxs)("li",{onClick:function(){return n=t,void e.addLabel(n);var n},children:[Object(F.jsxs)("div",{className:"label-to-show",style:{backgroundColor:"".concat(t.color)},children:[Object(F.jsx)("p",{children:t.desc}),Object(F.jsx)("span",{children:e.currTask.labels.find((function(e){return e.color===t.color}))?Object(F.jsx)(j.a,{className:"fa",icon:b.c}):null})]}),Object(F.jsx)("button",{className:"edit-label-btn",onClick:function(e){return function(e,t){e.stopPropagation(),r(t)}(e,t)},children:Object(F.jsx)(j.a,{icon:b.o})})]},n)}))})]}),a&&Object(F.jsx)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"absolute",width:0},ref:e.LabelEditRef,children:Object(F.jsx)(me,{setLabelModal:e.setLabelModal,currBoard:s,labelEditModal:a,setLabelEditModal:r,addLabel:e.addLabel})})]})}n(341);function fe(e){var t=Object(O.a)(),n=t.register,a=t.handleSubmit,r=Object(o.d)((function(e){return e.boardReducer.currBoard})),s=Object(c.useState)(r.members),i=Object(u.a)(s,2),l=i[0],d=i[1];return Object(c.useEffect)((function(){je.on("add-member-to-task-from-back",(function(){}))})),Object(F.jsxs)("div",{className:"member-modal",children:[Object(F.jsxs)("div",{className:"modal-header",children:[Object(F.jsx)("h3",{children:"Members"}),Object(F.jsx)("p",{onClick:function(){return e.setMemberModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("form",{onChange:a((function(e){var t=r.members.filter((function(t){return t.name.toLowerCase().includes(e.searchMember.toLowerCase())}));t.length||t.push({_id:"failMember",name:"Member not found."}),d(t)})),children:Object(F.jsx)("input",Object(m.a)(Object(m.a)({autoComplete:"off",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}},n("searchMember")),{},{type:"text",placeholder:"Search members..."}))}),Object(F.jsx)("h3",{children:"Users:"}),Object(F.jsx)("ul",{className:"member-container",children:l.map((function(t){return"failMember"!==t._id?Object(F.jsxs)("li",{onClick:function(){return function(t){e.addMemberToTask(t._id)}(t)},className:"members-list",children:[Object(F.jsx)(U.a,{name:t.name,size:"30",round:!0},t._id),Object(F.jsx)("span",{children:t.name}),Object(F.jsx)("span",{className:"member-icon",children:e.currTask.members.find((function(e){return e._id===t._id}))?Object(F.jsx)(j.a,{icon:b.c,children:" "}):null})]},t._id):Object(F.jsx)("li",{className:"members-list",children:Object(F.jsx)("span",{children:t.name})},t._id)}))})]})}n(342);function pe(e){var t=Object(O.a)(),n=t.register,c=t.handleSubmit;return Object(F.jsxs)("div",{className:"checklist-modal",children:[Object(F.jsxs)("div",{className:"modal-header",children:[Object(F.jsx)("h3",{children:"Add Checklist"}),Object(F.jsx)("p",{className:"btn-close-icon",onClick:function(){return e.setChecklistModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("h3",{children:"Title:"}),Object(F.jsxs)("form",{onSubmit:c((function(t){t.title=t.title.replace(/'|"/g,'\\"');var n={title:t.title,list:[],range:0};e.addChecklist(n),e.setChecklistModal(!1)})),children:[Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"text",placeholder:"Checklist title",autoComplete:"off",id:"title",name:"title"},n("title")),{},{defaultValue:""})),Object(F.jsx)("button",{children:"Add checklist"})]})]})}n(343);var Oe=n(233),xe=n(26),ve=n(497),ke=n(234),ge=n(496),Ce=n(495),ye=Object(ke.a)({overrides:{MuiPickersCalendarHeader:{switchHeader:{backgroundColor:"inherit",color:"#172b4d"}},MuiPickersDay:{day:{color:Ce.a.A700},daySelected:{color:"#fff !important",backgroundColor:"rgb(66, 82, 110)"},dayDisabled:{color:Ce.a[100]},container:{backgroundColor:"black"},current:{color:"rgb(0, 82, 204)",border:"rgb(0, 82, 204) 2px solid"}}}});function we(e){var t=Date.now()+6048e5,n=(new Date(Date.now()+6048e5),a.a.useState(t)),c=Object(u.a)(n,2),r=c[0],s=c[1];return Object(F.jsxs)("div",{className:"due-date-modal",children:[Object(F.jsxs)("section",{className:"modal-header",children:[Object(F.jsx)("h3",{children:"Due Date"}),Object(F.jsx)("p",{className:"btn-close-icon",onClick:function(){return e.setDueDateModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("form",{onSubmit:function(){var t=Date.parse(r);e.addDueDate(t),e.setDueDateModal(!1)},children:[Object(F.jsx)(ge.a,{theme:ye,children:Object(F.jsx)(xe.a,{utils:Oe.a,children:Object(F.jsx)(ve.a,{disableToolbar:!0,variant:"static",format:"dd/MM/yyyy",margin:"normal",id:"date-picker-inline",label:"Pick A Deadline",value:r,onChange:function(e){return s(e)},KeyboardButtonProps:{"aria-label":"change date"}})})}),Object(F.jsx)("div",{className:"ddm-btn",children:Object(F.jsx)("button",{children:"save"})})]})]})}n(344);function Ne(e){var t=Object(c.useState)([]),n=Object(u.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(!1),i=Object(u.a)(s,2),o=i[0],l=i[1],d=Object(c.useState)(!1),h=Object(u.a)(d,2),f=h[0],p=h[1],x=Object(c.useState)("#000"),v=Object(u.a)(x,2),k=v[0],g=v[1],C=Object(c.useState)("#fff"),y=Object(u.a)(C,2),w=y[0],N=y[1],_=Object(c.useState)(""),S=Object(u.a)(_,2),D=S[0],T=S[1],E=Object(c.useState)(3),A=Object(u.a)(E,2),B=A[0],M=A[1],L=Object(c.useRef)(null),I=Object(O.a)(),R=I.register,P=I.handleSubmit,z=I.reset,U=0,W=0,V=function(e,t){var n,c=L.current,s=c.getContext("2d");l(!0),"down"===t&&(p(!0),e.clientX,e.clientY,U=e.clientX-c.getBoundingClientRect().left,W=e.clientY-c.getBoundingClientRect().top,n={x:U,y:W},r([].concat(Object(q.a)(a),[n])),o&&(s.beginPath(),s.fillStyle=w,s.fillRect(U,W,2,2),s.closePath(),l(!1))),"up"!==t&&"out"!==t||p(!1),"move"===t&&f&&(U,W,U=e.clientX-c.getBoundingClientRect().left,W=e.clientY-c.getBoundingClientRect().top,n={x:U,y:W},r([].concat(Object(q.a)(a),[n])),G(s))},G=function(e){e.beginPath(),e.moveTo(a[a.length-1].x,a[a.length-1].y),e.lineTo(U,W),e.strokeStyle=k,e.lineWidth=B,e.stroke(),e.closePath()};return Object(F.jsxs)("div",{className:"draw-note-modal",children:[Object(F.jsxs)("section",{className:"modal-header",children:[Object(F.jsx)("h3",{children:"Draw Note"}),Object(F.jsx)("p",{className:"btn-close-icon",onClick:function(){return e.setDrawNoteModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("section",{className:"draw-note-modal-body",children:Object(F.jsxs)("div",{className:"canvas-container",children:[Object(F.jsxs)("form",{onChange:P((function(e){T(e.title)})),children:[Object(F.jsx)("h3",{children:"Note Title"}),Object(F.jsx)("input",Object(m.a)(Object(m.a)({placeholder:"Note Title",type:"text",autoComplete:"off",id:"canvas-title",name:"canvas-title"},R("title")),{},{defaultValue:"",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}}))]}),Object(F.jsx)("canvas",{ref:L,width:"300px",height:"400px",onMouseDown:function(e){return V(e,"down")},onMouseMove:function(e){return V(e,"move")},onMouseOut:function(e){return V(e,"out")},onMouseUp:function(e){return V(e,"up")}}),Object(F.jsxs)("form",{className:"canvas-inputs",onChange:P((function(e){g(e.inputColor),M(e.inputSize),e.inputBackgroungColor!==w&&function(e){var t=L.current.getContext("2d");t.fillStyle=w,t.fillRect(0,0,300,400),N(e)}(e.inputBackgroungColor)})),children:[Object(F.jsxs)("div",{children:[Object(F.jsxs)("label",{htmlFor:"input-color",children:[Object(F.jsx)(j.a,{className:"fa",icon:b.t})," Color",Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"color",id:"input-color",name:"input-color"},R("inputColor")),{},{defaultValue:k}))]}),Object(F.jsxs)("label",{htmlFor:"input-backgroungColor",children:[Object(F.jsx)(j.a,{className:"fa",icon:b.l})," Background Color",Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"color",id:"input-backgroungColor",name:"input-backgroungColor"},R("inputBackgroungColor")),{},{defaultValue:"#fff"}))]})]}),Object(F.jsx)("label",{htmlFor:"input-size",children:"size"}),Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"number",id:"input-size",name:"input-size"},R("inputSize")),{},{defaultValue:B}))]}),Object(F.jsxs)("div",{className:"canvas-btns",children:[Object(F.jsx)("button",{onClick:function(){r([]),L.current.getContext("2d").clearRect(0,0,window.innerHeight,window.innerWidth),N("#fff")},children:"Clear"}),Object(F.jsx)("button",{onClick:function(){var t=L.current.toDataURL(),n={_id:Y.makeId(),title:D||"",src:t};e.currTask.attachments.push(n),e.updateBoard(e.currTask),z({title:""}),e.setDrawNoteModal(!1)},children:"Save"})]})]})})]})}var _e=n(54),Se=n.n(_e);n(352),n(353);function De(e){var t=e.type,n=e.txt,c=e.currTask,a=e.setCloudImgs,r=e.cloudOp,s=Object(o.c)(),l=Object(o.d)((function(e){return e.boardReducer.currBoard}));return Object(F.jsx)("section",{className:"cloudinary-container",children:Object(F.jsx)(i.a,{sources:["local","camera","url","dropbox","instagram"],sourceKeys:{dropboxAppKey:"idwo4j2egt6411m",instagramClientId:"14c890ce047a8defd4410d4bd0b1d823"},resourceType:"image",cloudName:"dtu0lzwpw",uploadPreset:"aywupxtw",buttonText:n||"Attachments",style:{color:"inherit",border:"none",width:"100%",height:"100%",backgroundColor:"inherit",borderRadius:"5px",padding:0},folder:"taskman",onSuccess:function(e){var n;"cover"===t?(c.cover=e.info.secure_url,r.updateBoard(c)):"background"===t?(l.images.unshift(e.info.secure_url),a(l.images),s(ce(l)),s(ae(l._id))):(n={_id:Y.makeId(),title:e.info.original_filename,src:e.info.secure_url},c.attachments.push(n),r.updateBoard(c))},onFailure:function(e){return console.log(e)},logging:!1,customPublicId:"sample",eager:"w_400,h_300,c_pad|w_260,h_200,c_crop",use_filename:!0,unique_filename:!0,apiKey:639164948471337,accepts:"application/json",contentType:"application/json",withCredentials:!0})})}var Te=n.p+"static/media/small-loader.3f60b3a5.svg";function Ee(e){var t=K.getCoverColors();return Object(F.jsxs)("section",{className:"cover-modal",style:e.currTask.cover?null:{top:"202px"},children:[Object(F.jsxs)("div",{className:"modal-header",children:[Object(F.jsx)("h3",{children:"Cover"}),Object(F.jsx)("p",{className:"btn-close-icon",onClick:function(){return e.setCoverModal(!1)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("div",{className:"cover-modal-body",children:[Object(F.jsx)("h3",{children:"Colors"}),Object(F.jsx)("div",{className:"cover-color-container",children:t.map((function(t,n){return Object(F.jsx)("span",{className:"cover-color",onClick:function(){return e.addCover(t)},style:{backgroundColor:t}},n)}))}),e.currTask.attachments.length?Object(F.jsxs)("div",{children:[Object(F.jsx)("h3",{children:"Attachments"}),Object(F.jsx)("div",{className:"cover-attachments-container hide-overflow",children:e.currTask.attachments.map((function(t){return Object(F.jsx)(Se.a,{crossOrigin:"anonymous",src:t.src,format:"hex",children:function(n){var c=n.data;return n.loading?Object(F.jsx)("div",{className:"att-loader-cover-modal",children:Object(F.jsx)("img",{src:Te,alt:""})}):Object(F.jsx)("div",{className:"cover-attach",style:{backgroundColor:c,backgroundImage:"url(".concat(t.src,")")},onClick:function(){return e.addCover(t.src)}})}},t._id)}))})]}):null,Object(F.jsx)(De,{cloudOp:e.cloudOp,currCard:e.currCard,className:"add-attachment-cover-btn",txt:"Upload photo",type:"cover",currTask:e.currTask}),e.currTask.cover&&Object(F.jsx)("button",{className:"remove-cover-btn",onClick:function(){return e.addCover("")},children:"Remove cover"})]})]})}var Ae=n(68);function Be(e){var t=e.taskModalOp,n=t.currTask,a=t.currBoard,r=t.setCurrTask,s=t.user,i=Object(o.c)(),l=Object(O.a)(),d=l.register,h=l.handleSubmit,x=l.reset,v=Object(c.useState)(null),k=Object(u.a)(v,2),g=k[0],C=k[1],y=Object(c.useState)(null),w=Object(u.a)(y,2),N=w[0],_=w[1],S=Object(c.useRef)(null),D=function(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])},T=(Object(c.useRef)(),Object(c.useState)(!1)),E=Object(u.a)(T,2),A=E[0],B=E[1],M=Object(c.useRef)();D(M,(function(){return B(!1)}));var L=Object(c.useState)(null),I=Object(u.a)(L,2),R=I[0],W=I[1],V=Object(c.useRef)();D(V,(function(){return W(!1)}));var q=Object(c.useState)(!1),G=Object(u.a)(q,2),H=(G[0],G[1]),X=Object(c.useRef)();D(X,(function(){return H(!1)}));var J=Object(c.useState)(!1),Q=Object(u.a)(J,2),Z=Q[0],$=Q[1],ee=Object(c.useRef)();D(ee,(function(){return $(!1)}));var te=Object(c.useState)(!1),ne=Object(u.a)(te,2),re=ne[0],se=ne[1],ie=Object(c.useRef)();D(ie,(function(){return se(!1)}));var oe=Object(c.useState)(!1),de=Object(u.a)(oe,2),ue=de[0],be=de[1],me=Object(c.useRef)();D(me,(function(){return be(!1)}));var Oe=Object(c.useState)(!1),xe=Object(u.a)(Oe,2),ve=xe[0],ke=xe[1],ge=Object(c.useRef)();D(ge,(function(){return ke(!1)}));var Ce=Object(c.useState)(!1),ye=Object(u.a)(Ce,2),_e=ye[0],Be=ye[1],Me=Object(c.useRef)();D(Me,(function(){return Be(!1)}));var Le=Object(c.useState)(!1),Ie=Object(u.a)(Le,2),Re=Ie[0],Pe=Ie[1],ze=a.cards.find((function(e){return e.tasks.find((function(e){return e._id===n._id}))})),Ue=function(e){var t=+(e.list.reduce((function(e,t){return t.isChecked+e}),0)/e.list.length*100).toFixed(2);e.range=t,Fe(n)},Fe=function(e){var t=K.updateCard(e,ze,a);je.emit("task to-update-task",{card:ze,task:e||n}),i(ce(t)),i(ae(a._id))};if(!n||!ze)return Object(F.jsx)("div",{className:"loader-container",children:Object(F.jsx)("img",{src:z,alt:""})});n.desc=n.desc.replace(/ S1P2A3C4E5 /g,"\n");var We,Ve={updateBoard:Fe};return Object(F.jsxs)("section",{className:"task-modal hide-overflow",children:[Object(F.jsxs)("div",{className:"task-modal-form",style:n.cover?{marginTop:"164px"}:{marginTop:0},children:[n.cover?n.cover.includes("#")?Object(F.jsx)("div",{className:"cover-section",style:{backgroundColor:"".concat(n.cover)}}):Object(F.jsx)(Se.a,{src:n.cover,crossOrigin:"anonymous",format:"hex",children:function(e){var t=e.data;return e.loading?Object(F.jsx)("div",{children:"..."}):Object(F.jsx)("div",{className:"cover-section",style:{backgroundColor:t,backgroundImage:"url(".concat(n.cover,")")}})}}):null,Object(F.jsx)("div",{className:"task-header",children:Object(F.jsxs)("div",{className:"task-title",children:[Object(F.jsxs)("form",{onBlur:h((function(e){e.taskTitle&&(n.title=e.taskTitle,Fe(n))})),children:[Object(F.jsx)(j.a,{icon:b.w})," ",Object(F.jsx)("input",Object(m.a)(Object(m.a)({autoComplete:"off",type:"text",onKeyDown:function(e){"Enter"===e.key&&e.preventDefault()}},d("taskTitle")),{},{defaultValue:n.title,placeholder:"Task name"}))]}),Object(F.jsxs)("p",{className:"card-title",children:["In list: ",ze.title]})]})}),Object(F.jsxs)("div",{className:"task-description-modal",children:[n.members.length?Object(F.jsxs)("section",{className:"members-section",children:[Object(F.jsx)("h3",{children:"MEMBERS:"}),Object(F.jsxs)("div",{className:"member-list",children:[n.members.map((function(e,t){return Object(F.jsx)("div",{className:"member-in-modal",onClick:function(){return se(!0)},children:Object(F.jsx)(U.a,{name:e.name,size:"30",round:!0},t)},t)})),Object(F.jsx)("button",{onClick:function(){return se(!0)},children:Object(F.jsx)(j.a,{icon:b.p})})]})]}):null,n.labels.length?Object(F.jsxs)("section",{className:"labels-section",children:[Object(F.jsx)("h3",{children:"LABELS:"}),n.labels.map((function(e,t){return Object(F.jsx)("div",{className:"label-in-modal",onClick:function(){return B(!0)},style:{backgroundColor:e.color},children:Object(F.jsx)("p",{children:e.desc})},t)})),Object(F.jsx)("button",{onClick:function(){return B(!0)},children:Object(F.jsx)(j.a,{icon:b.p})})]}):null,n.dueDate?Object(F.jsxs)("section",{className:"due-date-moment-section",onClick:function(){n.doneAt?n.doneAt="":n.doneAt=Date.now(),Fe(n)},children:[Object(F.jsx)("h3",{children:"DUE DATE:"}),Object(F.jsxs)("span",{className:"due-date-moment",children:[" ",n.doneAt?Object(F.jsx)(j.a,{icon:b.d}):Object(F.jsx)(j.a,{icon:b.g}),Object(F.jsx)(le.a,{format:"MMM D YYYY",withTitle:!0,children:n.dueDate}),Object(F.jsx)("small",{style:{color:"white",display:(We=n,We.doneAt?"unset":We.dueDate>Date.now()?"none":"unset"),backgroundColor:function(e){return e.doneAt?"#61BD4F":e.dueDate>Date.now()?"inherite":"#ec9488"}(n)},children:function(e){return e.doneAt?"COMPLETED":e.dueDate>Date.now()?"":"OVERDUE"}(n)})]})," "]}):null,Object(F.jsxs)("section",{className:"desc-section",children:[Object(F.jsxs)("div",{className:"desc-svg",children:[Object(F.jsx)(j.a,{icon:b.a}),Object(F.jsx)("p",{children:"Description"})]}),Object(F.jsx)("form",{onBlur:h((function(e){return t=e,n.desc=t.desc.replace(/'|"/g,'\\"').replace(/\n/g," S1P2A3C4E5 "),void Fe(n);var t})),children:Object(F.jsx)("textarea",Object(m.a)(Object(m.a)({id:"desc",name:"desc",onClick:function(){return Pe(!Re)},defaultValue:undefined,placeholder:"Add some detailed description..."},d("desc")),{},{defaultValue:t.currTask.desc}))})]})]}),n.checklists.length?Object(F.jsx)("section",{children:n.checklists.map((function(e,c){return Object(F.jsxs)("div",{className:"checklist-in-modal",children:[Object(F.jsxs)("div",{className:"checklist-svg",children:[" ",Object(F.jsxs)("div",{className:"flex",children:[" ",Object(F.jsx)(j.a,{icon:b.k})," ",Object(F.jsxs)("p",{children:[e.title,":"]})]}),Object(F.jsx)("button",{onClick:function(){return t.addChecklist(c)},children:"Delete list"})]}),e.list.length?Object(F.jsxs)("h6",{children:[e.range,"%"]}):null,e.list.length?Object(F.jsx)("div",{className:"demo-range-container",children:100===e.range?Object(F.jsx)("div",{className:"demo-range-checked",style:{backgroundColor:"#61bd4f",width:e.range+"%"}}):Object(F.jsx)("div",{className:"demo-range-checked",style:{width:e.range+"%"}})}):null,e.list.length?e.list.map((function(t,n){return Object(F.jsxs)("div",{className:"checklist-items",children:[Object(F.jsx)("input",{type:"checkbox",id:"checklist-item-"+n,checked:t.isChecked,onChange:function(){!function(e){e.isChecked=!e.isChecked}(t),Ue(e)}}),t.isChecked?Object(F.jsx)("label",{style:{textDecoration:"line-through"},children:t.desc}):Object(F.jsx)("label",{children:t.desc})]},n)})):null,Object(F.jsxs)("form",{onSubmit:h((function(e){return function(e,t){var c=Object.keys(e).find((function(e){return e==="inputItem"+t}));if(e[c]){var a=e[c].replace(/'|"/g,'"');n.checklists[t].list.push({desc:a,isChecked:!1}),Ue(n.checklists[t]),x({inputItem0:"",inputItem1:"",inputItem2:"",inputItem3:"",inputItem4:""}),je.emit("task to-update-task",{card:ze,task:n})}}(e,c)})),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",id:"input-item-"+c,name:"item",placeholder:"Add an item"},d("inputItem"+c))),Object(F.jsx)("button",{className:"add-an-item-btn",children:"Add"})]})]},c)}))}):null,n.attachments.length?Object(F.jsxs)("section",{children:[Object(F.jsxs)("div",{className:"att-svg",children:[Object(F.jsx)(j.a,{icon:b.n}),Object(F.jsx)("p",{children:"Attachments"})]}),n.attachments.map((function(e,t){return Object(F.jsxs)("div",{className:"attachments-container",children:[Object(F.jsx)("div",{className:"att-src",children:Object(F.jsx)(Se.a,{crossOrigin:"anonymous",src:e.src,format:"hex",children:function(t){var n=t.data;return t.loading?Object(F.jsx)("div",{className:"att-loader",children:Object(F.jsx)("img",{src:Te,alt:""})}):Object(F.jsx)("div",{className:"attachment-img",style:{backgroundColor:n,backgroundImage:"url(".concat(e.src,")")},alt:"photo"})}})}),Object(F.jsxs)("div",{className:"att-details",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("p",{children:e.title||"Photo"}),Object(F.jsx)("p",{children:"Added Right now!"})]}),Object(F.jsxs)("div",{className:"att-btns",children:[Object(F.jsx)("button",{onClick:function(e){W(!R),function(e){C(e.target.offsetLeft),_(e.target.offsetTop)}(e)},children:"Edit"}),Object(F.jsx)("button",{onClick:function(){return function(e){var t=n.attachments.findIndex((function(t){return t._id===e}));n.attachments.splice(t,1),Fe(n)}(e._id)},children:"Delete"})]})]}),R&&Object(F.jsxs)("div",{style:{left:"".concat(g+450,"px"),top:"".concat(N-300,"px")},className:"att-edit",children:[Object(F.jsxs)("div",{className:"att-edit-header",children:[Object(F.jsx)("p",{children:"Edit attachment"}),Object(F.jsx)("button",{onClick:function(){return W(!1)},children:"x"})]}),Object(F.jsxs)("div",{className:"att-edit-main",ref:V,children:[Object(F.jsx)("p",{children:"Attachment name:"}),Object(F.jsxs)("form",{onSubmit:h((function(e){return function(e,t){var c=Object.keys(e).find((function(e){return e==="attItem"+t}));n.attachments[t].title=e[c],Fe(n),W(!1)}(e,t)})),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",id:"att-item-"+t,defaultValue:e.title},d("attItem"+t))),Object(F.jsx)("button",{children:"Save"})]})]})]})]},t)}))]}):null,Object(F.jsxs)("div",{className:"att-svg",children:[Object(F.jsx)(j.a,{icon:b.h}),Object(F.jsx)("p",{children:"Comments"})]}),Object(F.jsxs)("div",{className:"task-comment",children:[Object(F.jsx)("form",{onSubmit:h((function(e){var t={_id:Y.makeId(),member:s?s.username:"Guest",timeStamp:Date.now(),title:e.comment};n.comments.unshift(t),Fe(n),x({comment:""})})),children:Object(F.jsx)("input",Object(m.a)({className:"post-comment-input",type:"text",autoComplete:"off",id:"comment",name:"comment",placeholder:"Post a Comment..."},d("comment")))}),n.comments.length?n.comments.map((function(e,t){return Object(F.jsxs)("div",{className:"comment-container",children:[Object(F.jsx)("div",{className:"comment-avatar",children:Object(F.jsx)(U.a,{name:e.member,size:"30",round:!0},e._id)}),Object(F.jsxs)("div",{className:"comment-details",children:[Object(F.jsxs)("div",{className:"comment-header",children:[Object(F.jsx)("p",{className:"comment-member",children:e.member})," ",Object(F.jsx)("p",{children:Object(F.jsx)(le.a,{fromNow:!0,children:e.timeStamp})})]}),Object(F.jsxs)("form",{onChange:h((function(e){return function(e,t){var c=Object.keys(e).find((function(e){return e==="editComment"+t}));n.comments[t].title=e[c],Fe(n)}(e,t)})),className:"comment-title",children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",id:"comment-edit"+t,defaultValue:e.title},d("editComment"+t))),Object(F.jsx)("button",{style:{display:"none"},onClick:function(e){return e.preventDefault()}})]}),Object(F.jsx)("div",{className:"comment-btns",children:Object(F.jsx)("button",{onClick:function(){return function(e){var t=n.comments.findIndex((function(t){return t._id===e}));n.comments.splice(t,1),Fe(n)}(e._id)},children:"Delete"})})]})]},e._id)})):null]})]}),Object(F.jsxs)("div",{className:"add-to-task",style:n.cover?{marginTop:"172px"}:{marginTop:0},children:[Object(F.jsxs)("div",{className:"right-task-modal",children:[Object(F.jsx)("h3",{children:"Add To Task"}),Object(F.jsx)("p",{onClick:function(){return t.setCurrTask(null)},className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("div",{className:"right-task-modal-btns",children:[Object(F.jsxs)("div",{onClick:function(){B(!0)},className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.r}),Object(F.jsx)("p",{children:" Labels "}),A?Object(F.jsxs)("div",{onClick:function(e){return e.stopPropagation()},ref:M,children:[" ",Object(F.jsx)(he,{labelEditRef:X,setLabelModal:B,labelModal:A,currTask:n,addLabel:t.addLabel})]}):null]}),Object(F.jsxs)("div",{onClick:function(){return se(!0)},className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.u}),Object(F.jsx)("p",{children:" Members "}),re?Object(F.jsxs)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"absolute",width:0},ref:ie,children:[" ",Object(F.jsx)(fe,{setMemberModal:se,memberModal:re,currTask:n,addMemberToTask:t.addMember})]}):null]}),Object(F.jsxs)("div",{onClick:function(){return be(!0)},className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.k}),Object(F.jsx)("p",{children:" Checklist "}),ue?Object(F.jsxs)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"absolute",width:0},ref:me,children:[" ",Object(F.jsx)(pe,{setChecklistModal:be,checklistModal:ue,currTask:n,addChecklist:t.addChecklist})]}):null]}),Object(F.jsxs)("div",{onClick:function(){return ke(!0)},className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.g}),Object(F.jsx)("p",{children:" Due date "}),ve?Object(F.jsxs)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"absolute",width:0},ref:ge,children:[" ",Object(F.jsx)(we,{setDueDateModal:ke,dueDateModal:ve,addDueDate:t.addDueDate,currTask:n})]}):null]}),Object(F.jsx)(De,{currTask:n,cloudOp:Ve,txt:Object(F.jsxs)("div",{className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.n}),Object(F.jsx)("p",{children:"Attachments"})]})}),Z?Object(F.jsx)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"absolute",width:0},ref:ee,children:Object(F.jsx)(Ee,{setCoverModal:$,coverModal:Z,cloudOp:Ve,currCard:ze,addCover:t.addCover,currTask:n,onButtonClick:function(){S.current.click()},inputFile:S})}):null,Object(F.jsxs)("div",{onClick:function(){return $(!0)},className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.f}),Object(F.jsx)("p",{children:" Cover "})]}),Object(F.jsxs)("div",{onClick:function(){return Be(!0)},className:"right-task-btn",children:[Object(F.jsx)(j.a,{icon:b.m}),Object(F.jsx)("p",{children:" Draw Note "}),_e?Object(F.jsxs)("div",{onClick:function(e){return e.stopPropagation()},style:{position:"absolute",width:0},ref:Me,children:[" ",Object(F.jsx)(Ne,{setDrawNoteModal:Be,drawNoteModal:_e,updateBoard:Fe,currTask:n})]}):null]})]}),Object(F.jsx)("button",{className:"delete-task-btn",onClick:function(){Object(Ae.confirmAlert)({title:"Confirm to submit",message:"Are you sure want to delete this task?",buttons:[{label:"Delete task",onClick:function(){var e=ze.tasks.findIndex((function(e){return e._id===n._id}));ze.tasks.splice(e,1),r(null),i(ce(a)),n.members.forEach(function(){var e=Object(p.a)(f.a.mark((function e(t){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.tasks.findIndex((function(e){return e.title===n.title})),t.tasks.splice(c,1),e.next=4,i(P(t));case 4:e.sent;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{label:"Cancel",onClick:function(){return r(n)}}]})},children:"Delete task"})]})]})}n(354);var Me=n(137);n(460);function Le(e){var t=e.boardMenuOp,n=Object(o.c)(),a=Object(O.a)(),r=a.register,s=a.handleSubmit,i=a.reset,l=Object(o.d)((function(e){return e.boardReducer.currBoard})),d=Object(o.d)((function(e){return e.userReducer.user})),h=Object(c.useState)(!1),x=Object(u.a)(h,2),v=x[0],k=x[1],g=Object(c.useState)(!1),C=Object(u.a)(g,2),y=C[0],w=C[1],N=Object(c.useState)(!1),_=Object(u.a)(N,2),S=_[0],D=_[1],T=Object(c.useState)(!1),E=Object(u.a)(T,2),A=E[0],B=E[1],M=Object(c.useState)(null),I=Object(u.a)(M,2),R=I[0],P=I[1],W=Object(c.useState)(null),V=Object(u.a)(W,2),G=V[0],K=V[1],H=Object(c.useState)(null),X=Object(u.a)(H,2),J=X[0],Q=X[1],Z=Object(c.useState)(null),$=Object(u.a)(Z,2),ee=$[0],te=$[1],ne=Object(c.useState)(null),ae=Object(u.a)(ne,2),re=ae[0],se=ae[1],ie=Object(c.useState)(!1),oe=Object(u.a)(ie,2),de=oe[0],ue=oe[1],je=Object(c.useState)({task:"",labels:[]}),be=Object(u.a)(je,2),me=be[0],he=be[1];Object(c.useEffect)(Object(p.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(l.images),pe();case 2:case"end":return e.stop()}}),e)}))),[me]),Object(c.useEffect)((function(){t.isMenu||xe()}),[t.isMenu]),Object(c.useEffect)((function(){P(l.labels),Q(l.activity),ve()}),[l]);var fe=function(e){he(Object(m.a)(Object(m.a)({},me),{},{task:e.searchTask}))},pe=function(){t.filterTasks(me)},Oe=function(e){var t=Object.entries(e),c=(t=t.filter((function(e){return"addBoardLabel"!==e[0]&&"addBoardLabelColor"!==e[0]&&"boardDesc"!==e[0]&&"searchTask"!==e[0]}))).map((function(e,t){if(t)return t%2===0?{color:e[1]}:{desc:e[1]}}));c.splice(0,1);var a=[];c.forEach((function(e,t){t%2===0&&a.push({_id:Y.makeId(),desc:e.desc,color:c[t+1].color})})),P(a),n(ce(Object(m.a)(Object(m.a)({},l),{},{labels:a})))},xe=function(){t.setIsMenu(!1),k(!1),w(!1),D(!1),B(!1),fe(""),i()},ve=function(){var e=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,l.members.forEach(function(){var e=Object(p.a)(f.a.mark((function e(n){var c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getUserById(n._id);case 2:c=e.sent,t.push(c.tasks.length);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:se(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!G||!l||!R||!re||!J)return Object(F.jsx)("div",{className:"board-menu-loader",children:Object(F.jsx)("img",{src:z,alt:""})});l.description=l.description.replace(/ S1P2A3C4E5 /g,"\n");var ke={inProgress:[],overdue:[],completed:[]},ge={membersLabels:[],membersTasks:[]};l.cards.forEach((function(e){e.tasks.forEach((function(e){e.doneAt?ke.completed.push(e):e.dueDate?e.dueDate>Date.now()?ke.inProgress.push(e):ke.overdue.push(e):ke.inProgress.push(e)}))})),l.members.forEach((function(e){ge.membersLabels.push(e.name),ge.membersTasks.push(e.tasks.length)}));var Ce={labels:ge.membersLabels,datasets:[{label:"Members",data:ge.membersTasks,backgroundColor:["rgba(255, 99, 132, 0.7)","rgba(75, 192, 192, 0.7)","rgba(255, 205, 86, 0.7)","rgba(201, 203, 207, 0.7)","rgba(54, 162, 235, 0.7)"],hoverOffset:4}]},ye={labels:["Completed","In progress","Overdue"],datasets:[{label:"Status",data:[ke.completed.length,ke.inProgress.length,ke.overdue.length],backgroundColor:["rgba(29, 185, 84, 0.7)","rgba(255, 159, 64, 0.7)","rgba(255, 99, 132, 0.7)"],borderColor:["rgba(29, 185, 84)","rgba(255, 159, 64)","rgba(255, 99, 132)"],borderWidth:1}]};return Object(F.jsxs)("section",{className:"board-menu flex",style:t.isMenu?{maxWidth:"100%"}:{maxWidth:0},children:[Object(F.jsxs)("article",{className:"menu-main",children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h3",{children:"Menu"}),Object(F.jsx)("p",{onClick:xe,className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("p",{onClick:function(){return k(!v)},children:"About & Statistics"}),Object(F.jsx)("p",{onClick:function(){return w(!y)},children:"Background"}),Object(F.jsx)("p",{onClick:function(){return D(!S)},children:"Search cards"}),Object(F.jsx)("p",{onClick:function(){return B(!A)},children:"Labels"})]}),Object(F.jsxs)("div",{className:"hide-overflow flex",children:[Object(F.jsx)("h3",{children:"Activity"}),Object(F.jsxs)("ul",{children:[J.length?J.map((function(e){return Object(F.jsxs)("li",{children:["attached"!==e.type&&"removed"!==e.type?Object(F.jsxs)("p",{children:[Object(F.jsx)("span",{children:e.member})," ",e.type," ",e.desc," ","deleted"===e.type?"from":"to"," ",Object(F.jsx)("span",{children:e.card}),"board"===e.card?"":" card","."]}):Object(F.jsxs)("p",{children:[Object(F.jsx)("span",{children:e.member})," ",e.type," ",e.desc," ","removed"===e.type?"from":"to"," ",Object(F.jsx)("span",{children:e.card})," task."]}),Object(F.jsx)("small",{children:Object(F.jsx)(le.a,{fromNow:!0,children:e.createdAt})})]},e._id)})):null,!J.length&&Object(F.jsx)("li",{children:Object(F.jsx)("h1",{children:"No activity here..."})})]})]})]}),Object(F.jsxs)("article",{className:"menu-about sub-menu",style:v?{maxWidth:"100%"}:{maxWidth:0},children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("p",{onClick:function(){return k(!v)},className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.e})}),Object(F.jsx)("h3",{children:"About & Statistics"}),Object(F.jsx)("p",{onClick:xe,className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("div",{className:"flex hide-overflow",children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h3",{children:"Members"}),Object(F.jsx)("div",{children:t.members.map((function(e){return Object(F.jsx)(U.a,{name:e.name,size:"30",round:!0},e._id)}))}),Object(F.jsxs)("p",{children:["Total: ",t.members.length]})]}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h3",{children:"Description"}),Object(F.jsx)("form",{onBlur:s((function(e){var t=e.boardDesc.replace(/'|"/g,'\\"').replace(/\n/g," S1P2A3C4E5 ");n(ce(Object(m.a)(Object(m.a)({},l),{},{description:t})))})),children:Object(F.jsx)("textarea",Object(m.a)(Object(m.a)({defaultValue:l.description},r("boardDesc")),{},{placeholder:"It\u2019s your board\u2019s time to shine! Let people know what this board is used for and what they can expect to see."}))})]}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h3",{children:"Statistics"}),Object(F.jsx)("h4",{children:"Tasks per member"}),Object(F.jsx)(Me.b,{name:"PolarArea",data:Ce}),Object(F.jsx)("h4",{children:"Tasks status"}),Object(F.jsx)(Me.a,{height:"200",data:ye})]}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h3",{children:"Danger Zone"}),ee&&Object(F.jsx)("h3",{className:"authMsg",children:ee}),Object(F.jsx)("button",{onClick:function(){d?"avivzo9"!==d.username?te("You are not authorized to delete this board. Only the creator of this board can delete it."):Object(Ae.confirmAlert)({title:"Confirm to submit",message:"Are you sure want to delete this board?",buttons:[{label:"Delete board",onClick:function(){return t.deleteBoard()}},{label:"Cancel"}]}):te("Please login to delete this board")},children:"Delete board"})]})]})]}),Object(F.jsxs)("article",{className:"menu-background sub-menu",style:y?{maxWidth:"100%"}:{maxWidth:0},children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("p",{onClick:function(){return w(!y)},className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.e})}),Object(F.jsx)("h3",{children:"Change background"}),Object(F.jsx)("p",{onClick:xe,className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsxs)("div",{className:"hide-overflow flex",children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h4",{children:"Colors"}),Object(F.jsx)("div",{className:"flex",children:["lightgreen","lightyellow","lightblue","orange","slateblue","lightpink","lightgray","white"].map((function(e,n){return Object(F.jsx)("aside",{style:{backgroundColor:e},onClick:function(){return t.changeBackground(e,!0)}},n)}))})]}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("h4",{children:"Photos"}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)(De,{txt:"Upload photo",type:"background",setCloudImgs:K}),G.map((function(e,n){return Object(F.jsx)("img",{onClick:function(){return t.changeBackground(e)},decoding:"async",loading:"lazy",src:e,alt:e},n)}))]})]})]})]}),Object(F.jsxs)("article",{className:"menu-filter sub-menu",style:S?{maxWidth:"100%"}:{maxWidth:0},children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("p",{onClick:function(){return D(!S)},className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.e})}),Object(F.jsx)("h3",{children:"Search cards"}),Object(F.jsx)("p",{onClick:xe,className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("div",{children:Object(F.jsx)("form",{onChange:s(fe),children:Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"Search for task..."},r("searchTask")))})}),Object(F.jsxs)("div",{children:[Object(F.jsx)("h4",{children:"Search by label"}),Object(F.jsx)("ul",{children:R.map((function(e,t){return Object(F.jsxs)("li",{style:{backgroundColor:me.labels.includes(e.desc)?"gray":"inherit"},onClick:function(){return function(e){if(me.labels.includes(R[e].desc)){var t=me.labels.findIndex((function(t){return t===R[e].desc}));me.labels.splice(t,1),he(Object(m.a)(Object(m.a)({},me),{},{labels:me.labels}))}else he(Object(m.a)(Object(m.a)({},me),{},{labels:[].concat(Object(q.a)(me.labels),[R[e].desc])}))}(t)},children:[Object(F.jsx)("div",{style:{backgroundColor:e.color}}),Object(F.jsx)("p",{children:e.desc})]},t)}))})]})]}),Object(F.jsxs)("article",{className:"menu-labels sub-menu",style:A?{maxWidth:"100%"}:{maxWidth:0},children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("p",{onClick:function(){return B(!A)},className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.e})}),Object(F.jsx)("h3",{children:"Labels"}),Object(F.jsx)("p",{onClick:xe,className:"btn-close-icon",children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("div",{className:"hide-overflow",children:Object(F.jsxs)("ul",{children:[R.map((function(e,t){return Object(F.jsxs)("li",{style:{backgroundColor:e.color},children:[Object(F.jsxs)("form",{onChange:s(Y.debounce(Oe,100)),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",defaultValue:e.desc,placeholder:"Label name",required:!0},r("editBoardLabel"+t))),Object(F.jsxs)("label",{name:"label-color",children:[Object(F.jsx)(j.a,{className:"fa",icon:b.m}),Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"color",autoComplete:"off"},r("editBoardLabelColor"+t)),{},{defaultValue:e.color}))]})]}),Object(F.jsx)("p",{children:Object(F.jsx)(j.a,{className:"fa",icon:b.s,onClick:function(){return function(e){var t=R.findIndex((function(t){return t._id===e}));R.splice(t,1),P(Object(q.a)(R)),l.labels=R,n(ce(l))}(e._id)}})})]},e._id)})),!de&&Object(F.jsx)("li",{onClick:function(){return ue(!de)},children:Object(F.jsx)("p",{children:"New label"})}),de&&Object(F.jsxs)("li",{children:[Object(F.jsxs)("form",{onSubmit:s((function(e){var t={_id:Y.makeId(),desc:e.addBoardLabel,color:e.addBoardLabelColor};P([].concat(Object(q.a)(R),[t])),l.labels=[].concat(Object(q.a)(R),[t]),ue(!de),n(ce(l))})),children:[Object(F.jsx)("input",Object(m.a)({type:"text",placeholder:"Label name",autoComplete:"off",required:!0},r("addBoardLabel"))),Object(F.jsx)("input",Object(m.a)({type:"color",name:"label-color",id:"label-color",defaultValue:"#FFFFFF"},r("addBoardLabelColor"))),Object(F.jsx)("button",{children:"Add label"})]}),Object(F.jsx)("button",{onClick:function(){return ue(!de)},children:"X"})]})]})})]})]})}var Ie=n(231);n(461);function Re(e){var t=Object(o.c)(),n=Object(O.a)(),a=n.register,r=n.handleSubmit,s=n.reset,i=Object(o.d)((function(e){return e.boardReducer.currBoard})),l=Object(o.d)((function(e){return e.userReducer.users})),h=Object(o.d)((function(e){return e.userReducer.user})),x=Object(c.useState)(null),v=Object(u.a)(x,2),k=v[0],g=v[1],C=Object(c.useState)(null),y=Object(u.a)(C,2),w=y[0],N=y[1],_=Object(c.useState)(null),S=Object(u.a)(_,2),D=S[0],T=S[1],E=Object(c.useState)(null),A=Object(u.a)(E,2),B=A[0],M=A[1],R=Object(c.useRef)(),W=Object(c.useRef)(),V=Object(Ie.a)(W).events,G=Object(d.f)(),H=function(e,t){Object(c.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])};Object(c.useEffect)((function(){return w?Z(!1):null}),[w]),Object(c.useEffect)((function(){t(ne()),t(se(!1));var n=e.match.params.id;je.emit("board topic",n),i?ve||(ke(i.cards),M(i.members),je.on("task add-task",(function(e){ct(e)})),je.on("task update-task",(function(e){tt(e)})),je.on("card add-card",(function(e){rt(e)})),je.on("card delete-card",(function(e){at(e)})),je.on("board add-label",(function(e){st(e)})),je.on("card update-card",(function(e){et(e)})),je.on("card update-card-title",(function(e){nt(e)})),je.on("board add-activity",(function(e){it(e)}))):t(ae(n)),i&&M(i.members)}),[i]),Object(c.useEffect)((function(){lt()}),[B]),H(R,(function(){return N(!1)}));var X=Object(c.useState)(!1),J=Object(u.a)(X,2),Q=J[0],Z=J[1],$=Object(c.useRef)();H($,(function(){return Z(!1)}));var ee=Object(c.useState)(null),te=Object(u.a)(ee,2),oe=te[0],le=te[1],de=Object(c.useRef)();H(de,(function(){return De(!1)}));var ue=Object(c.useRef)();H(ue,(function(){return we(!1)}));var me=Object(c.useState)(null),he=Object(u.a)(me,2),fe=he[0],pe=he[1],Oe=Object(c.useState)((null===i||void 0===i?void 0:i.cards)?i.cards:null),xe=Object(u.a)(Oe,2),ve=xe[0],ke=xe[1],ge=Object(c.useState)(null),Ce=Object(u.a)(ge,2),ye=Ce[0],we=Ce[1],Ne=Object(c.useState)(null),_e=Object(u.a)(Ne,2),Se=_e[0],De=_e[1],Te=Object(c.useState)(null),Ee=Object(u.a)(Te,2),Me=Ee[0],Re=Ee[1],Pe=Object(c.useState)(null),ze=Object(u.a)(Pe,2),Ue=ze[0],Fe=ze[1],We=Object(c.useState)([]),Ve=Object(u.a)(We,2),qe=Ve[0],Ye=Ve[1],Ge=Object(c.useState)(!1),Ke=Object(u.a)(Ge,2),He=Ke[0],Xe=Ke[1],Je=Object(c.useState)(!0),Qe=Object(u.a)(Je,2),Ze=Qe[0],$e=Qe[1],et=function(e){var n=i.cards.findIndex((function(t){return t._id===e._id}));i.cards.splice(n,1,e),t(ae(i._id)),setTimeout((function(){return t(ae(i._id))}),500)},tt=function(e){var n=i.cards.find((function(t){return t._id===e.card._id})),c=n.tasks.findIndex((function(t){return t._id===e.task._id}));n.tasks.splice(c,1,e.task),t(ae(i._id))},nt=function(e){i.cards.find((function(t){return t._id===e._id})).title=e.title,t(ae(i._id))},ct=function(e){i.cards.find((function(t){return t._id===e.card})).tasks.push(e.task),t(ae(i._id))},at=function(e){var n=i.cards.findIndex((function(t){return t._id===e.card}));i.cards.splice(n,1),t(ae(i._id))},rt=function(e){i.cards.push(e),t(ae(i._id))},st=function(e){if(e.task.labels.length)if(e.task.labels.some((function(t){return t.color===e.label.color}))){var n=e.task.labels.findIndex((function(t){return t.color===e.label.color}));e.task.labels.splice(n,1)}else e.task.labels.push(e.label);else e.task.labels.push(e.label);K.updateCard(e.task,e.card,i),t(ae(i._id))},it=function(e){i.activity.unshift(e),t(ae(i._id))},ot=function(){le(null),De(!1)},lt=function(){if(B){var e=B.map((function(e){return e._id})),t=l.filter((function(t){if(!e.includes(t._id))return t.name}));Ye(t)}},dt=function(){var e=Object(p.a)(f.a.mark((function e(n){var c,a,r,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getUserById(n);case 2:c=e.sent,w.members.length&&w.members.some((function(e){return e._id===c._id}))?(a=c.tasks.findIndex((function(e){return e._id===w._id})),c.tasks.splice(a,1),r=w.members.findIndex((function(e){return e._id===c._id})),w.members.splice(r,1),jt(h?h.username:"Guest","removed",c.username,w.title)):(c.tasks.push({_id:Y.makeId(),title:w.title}),w.members.push(c),jt(h?h.username:"Guest","attached",c.username,w.title)),s=K.updateCard(w,k,i),je.emit("task to-update-task",{card:k,task:w}),t(ce(s)),t(P(c)),c._id===h._id&&t(I(c));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(e){var n=K.getEmptyCard();n.title=e.newCardTitle,ke([].concat(Object(q.a)(ve),[n])),i.cards=[].concat(Object(q.a)(ve),[n]),t(ce(i)),pe(!fe),s(),jt(h?h.username:"Guest","added","card"),je.emit("card to-add-card",n)},jt=function(e,n,c){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"board",r={_id:Y.makeId(),member:e,type:n,desc:c,card:a,createdAt:Date.now()};i.activity.unshift(r),je.emit("board to-add-activity",r),t(ce(i))},bt=function(){var e=Object(p.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(re(n||i._id));case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:G.push("/boards");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!i||!ve||!ve||!B)return Object(F.jsx)("div",{className:"loader-container",children:Object(F.jsx)("img",{src:z,alt:""})});var mt={openCardModal:function(e,t){"p"===e.target.localName?(Re(e.target.parentElement.offsetLeft),Fe(e.target.parentElement.offsetTop+40)):(Re(e.target.offsetLeft),Fe(e.target.offsetTop+40)),De(!0),le(t)},closeModal:ot,addActivity:jt,setCurrCard:g,setCurrTask:N,isDescShown:He,setIsDescShown:Xe},ht={setIsMenu:Z,isMenu:Q,changeBackground:function(e,n){n?(jt(h?h.username:"Guest","change","color"),t(ce(Object(m.a)(Object(m.a)({},i),{},{background:{color:e,img:null}})))):(jt(h?h.username:"Guest","change","image"),t(ce(Object(m.a)(Object(m.a)({},i),{},{background:{color:null,img:e}})))),setTimeout((function(){return t(ae(i._id))}),100)},members:i.members,filterTasks:function(e){if(T(e),e.task||e.labels.length){var t=[];e.task&&i.cards.map((function(n){return n.tasks.filter((function(c){c.title.toLowerCase().includes(e.task.toLowerCase())&&t.push(n)}))})),e.labels.length&&i.cards.forEach((function(n){return n.tasks.forEach((function(c){return c.labels.forEach((function(c){e.labels.includes(c.desc)&&t.push(n)}))}))}));var n=[];if((t=t.filter((function(e){if(!n.includes(e._id))return n.push(e._id),e})))&&Object.keys(t).length)ke(t);else{var c=K.getEmptyCard();c.title="No search results.",ke([c])}}else ke(i.cards)},addActivity:jt,deleteBoard:bt},ft={setCurrTask:N,currTask:w,addLabel:function(e){if(w.labels.length)if(w.labels.some((function(t){return t.color===e.color}))){var n=w.labels.findIndex((function(t){return t.color===e.color}));w.labels.splice(n,1)}else w.labels.push(e);else w.labels.push(e);var c=K.updateCard(w,k,i);t(ce(c)),t(ae(c._id)),jt(h?h.username:"Guest","added","label",k.title),je.emit("task to-update-task",{card:k,task:w})},addMember:dt,addChecklist:function(e){"object"===typeof e?w.checklists.push(e):w.checklists.splice(e,1);var n=K.updateCard(w,k,i);je.emit("task to-update-task",{card:k,task:w}),t(ce(n))},addDueDate:function(e){w.dueDate=e;var n=K.updateCard(w,k,i);je.emit("task to-update-task",{card:k,task:w}),t(ce(n))},addCover:function(e){w.cover=e;var n=K.updateCard(w,k,i);je.emit("task to-update-task",{card:k,task:w}),t(ce(n)),t(ae(n._id))},currBoard:i,user:h};return Object(F.jsxs)("div",{className:"board-details sub-container",children:[Object(F.jsxs)("div",{className:"board-header flex",children:[Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("form",{onBlur:r((function(e){var n=e.boardTitle.replace(/'|"/g,"");t(ce(Object(m.a)(Object(m.a)({},i),{},{title:n})))})),children:Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"text",id:"title",name:"title"},a("boardTitle")),{},{defaultValue:i.title,autoComplete:"off"}))}),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("div",{className:"avatars hide-overflow",children:B.map((function(e){return Object(F.jsx)(U.a,{name:e.name,size:"30",round:!0},e._id)}))}),Object(F.jsx)("button",{onClick:function(){we(!ye),lt()},children:"Invite"}),ye&&Object(F.jsxs)("div",{ref:ue,className:"invite-members-modal hide-overflow",children:[Object(F.jsxs)("div",{className:"invite-modal-header",children:[Object(F.jsx)("h3",{children:"Invite members"}),Object(F.jsx)("p",{className:"btn-close-icon",onClick:function(){return we(!ye)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("form",{onChange:r((function(e){var t=B.map((function(e){return e._id})),n=l.filter((function(n){if(!t.includes(n._id))return n.name.toLowerCase().includes(e.member.toLowerCase())}));Ye(n)})),children:Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"Search users",id:"member",name:"member"},a("member")))}),qe.length?Object(F.jsxs)("div",{className:"invite-members",children:[Object(F.jsx)("p",{children:"Suggested Members:"}),Object(F.jsx)("ul",{children:qe.map((function(e,n){return n>=3?null:Object(F.jsxs)("li",{onClick:function(){return function(e){M([].concat(Object(q.a)(B),[e])),i.members=[].concat(Object(q.a)(B),[e]),t(ce(i))}(e)},children:[Object(F.jsx)(U.a,{name:e.name,size:"30",round:!0},e._id),Object(F.jsx)("p",{children:e.name}),Object(F.jsx)("p",{children:Object(F.jsx)(j.a,{icon:b.p})})]},e._id)}))})]}):null,B.length?Object(F.jsxs)("div",{className:"invite-members",children:[Object(F.jsx)("p",{children:"In This Board:"}),Object(F.jsx)("ul",{children:B.map((function(e,n){return Object(F.jsxs)("li",{onClick:function(){return function(e){var n=i.members.findIndex((function(t){return t._id===e}));B.splice(n,1),M(Object(q.a)(B)),i.members=Object(q.a)(B),t(ce(i))}(e._id)},children:[Object(F.jsx)(U.a,{name:e.name,size:"30",round:!0},n),Object(F.jsx)("p",{children:e.name}),Object(F.jsx)("p",{children:Object(F.jsx)(j.a,{icon:b.c})})]},e._id)}))})]}):null]})]})]}),Object(F.jsxs)("div",{ref:D&&D.task?null:$,className:"flex",children:[Object(F.jsx)("p",{className:"open-menu-btn",onClick:function(){return Z(!0)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.b})}),Object(F.jsx)(Le,{boardMenuOp:ht})]})]}),Object(F.jsx)(ie.a,{onDragEnd:function(e){if(e.destination){var n=Array.from(ve),c=n.splice(e.source.index,1),a=Object(u.a)(c,1)[0];n.splice(e.destination.index,0,a),ke(n),i.cards=Object(q.a)(n),t(ce(i)),$e(!0)}},children:Object(F.jsx)(ie.c,{direction:"horizontal",droppableId:"cards",type:"CARD",children:function(e){return Object(F.jsx)("div",{className:"cards-container flex",ref:e.innerRef,children:Ze?Object(F.jsx)("div",Object(m.a)(Object(m.a)(Object(m.a)({},e.droppableProps),V),{},{ref:W,className:"cards-container flex",children:Object(F.jsxs)("div",{className:"flex",children:[ve.map((function(e,t){return Object(F.jsx)("div",{className:"test",children:Object(F.jsx)(ie.b,{draggableId:e._id,index:t,children:function(t){return Object(F.jsx)("div",Object(m.a)(Object(m.a)(Object(m.a)({onMouseDownCapture:function(){return $e(!1)}},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(F.jsx)(be,{cardPreviewOp:mt,card:e},e._id)}),e._id)}},e._id)},e._id)})),e.placeholder,!fe&&Object(F.jsxs)("button",{className:"add-card-btn",onClick:function(){return pe(!fe)},children:[Object(F.jsx)(j.a,{className:"fa",icon:b.p}),Object(F.jsx)("p",{children:"Add another card"})]}),fe&&Object(F.jsxs)("div",{className:"add-card",children:[" ",Object(F.jsxs)("form",{className:"add-card-container",onSubmit:r(ut),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"Card name",id:"title",name:"title"},a("newCardTitle"))),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("button",{children:"Add Card"}),Object(F.jsx)("p",{onClick:function(){return pe(!fe)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]})]})]})]})})):Object(F.jsx)("div",Object(m.a)(Object(m.a)({},e.droppableProps),{},{className:"cards-container flex",children:Object(F.jsxs)("div",{className:"flex",children:[ve.map((function(e,t){return Object(F.jsx)("div",{className:"test",children:Object(F.jsx)(ie.b,{draggableId:e._id,index:t,children:function(t){return Object(F.jsx)("div",Object(m.a)(Object(m.a)(Object(m.a)({onMouseOut:function(){return $e(!0)}},t.draggableProps),t.dragHandleProps),{},{ref:t.innerRef,children:Object(F.jsx)(be,{cardPreviewOp:mt,card:e},e._id)}),e._id)}},e._id)},e._id)})),e.placeholder,!fe&&Object(F.jsxs)("button",{className:"add-card-btn",onClick:function(){return pe(!fe)},children:[Object(F.jsx)(j.a,{className:"fa",icon:b.p}),Object(F.jsx)("p",{children:"Add another card"})]}),fe&&Object(F.jsxs)("div",{className:"add-card",children:[" ",Object(F.jsxs)("form",{className:"add-card-container",onSubmit:r(ut),children:[Object(F.jsx)("input",Object(m.a)({type:"text",autoComplete:"off",placeholder:"Card name",id:"title",name:"title"},a("newCardTitle"))),Object(F.jsxs)("div",{className:"flex",children:[Object(F.jsx)("button",{children:"Add Card"}),Object(F.jsx)("p",{onClick:function(){return pe(!fe)},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]})]})]})]})}))})}})}),Se&&Object(F.jsxs)("div",{ref:de,style:{left:"".concat(Me,"px"),top:"".concat(Ue,"px")},className:"card-modal",children:[Object(F.jsxs)("div",{className:"card-modal-header",children:[Object(F.jsx)("h3",{children:oe.title}),Object(F.jsx)("p",{onClick:function(){return ot()},children:Object(F.jsx)(j.a,{className:"fa",icon:b.s})})]}),Object(F.jsx)("div",{className:"card-modal-btns",children:Object(F.jsx)("button",{onClick:function(){Object(Ae.confirmAlert)({title:"Confirm to submit",message:"Are you sure want to delete this card?",buttons:[{label:"Delete board",onClick:function(){var e=i.cards.findIndex((function(e){return e._id===k._id})),n=K.updateBoard(e,i);je.emit("card to-delete-card",e),k.tasks.forEach((function(e){e.members.length&&e.members.forEach(function(){var n=Object(p.a)(f.a.mark((function n(c){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=c.tasks.findIndex((function(t){return t.title===e.title})),c.tasks.splice(a,1),n.next=4,t(P(c));case 4:n.sent;case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),jt(h?h.username:"Guest","deleted","card"),ke(i.cards),t(ce(n)),ot()}},{label:"Cancel"}]})},children:"Delete Card"})})]}),w&&Object(F.jsx)("div",{ref:R,children:Object(F.jsx)(Be,{taskModalOp:ft})})]})}n(462);function Pe(){var e=Object(o.c)();return Object(c.useEffect)((function(){e(se(!1))})),Object(F.jsxs)("section",{className:"sub-container landing-page-container",children:[Object(F.jsxs)("div",{className:"landing-page-section",children:[Object(F.jsxs)("div",{children:[Object(F.jsxs)("h3",{children:["T",Object(F.jsx)("span",{children:"a"}),"skm",Object(F.jsx)("span",{children:"a"}),"n"]}),Object(F.jsx)("p",{children:"Taskman helps teams move work forward. Collaborate, manage projects, and reach new productivity peaks. From high rises to the home office, the way your team works is unique-accomplish it all with Taskman."})]}),Object(F.jsx)("article",{children:Object(F.jsx)("img",{src:"https://cdn.dribbble.com/users/2851002/screenshots/9667092/media/09648e273e248e7cfd22ade4010b2a6e.gif",alt:""})})]}),Object(F.jsxs)("div",{className:"landing-page-section landing-page-section-right",children:[Object(F.jsx)("article",{children:Object(F.jsx)("img",{src:"https://cdn.dribbble.com/users/2851002/screenshots/9073688/media/bb69af3d8f2404f4cfcc7cecdc558be6.gif",alt:""})}),Object(F.jsxs)("div",{children:[Object(F.jsx)("h3",{children:"Keep Track Of Your Team"}),Object(F.jsx)("p",{children:"Taskman has statistics panel to see your team progress. Keep track of your team's assignment and completion of tasks easily!"})]})]}),Object(F.jsxs)("div",{className:"landing-page-section",children:[Object(F.jsxs)("div",{children:[Object(F.jsx)("h3",{children:"Live Updates & Push Notifications"}),Object(F.jsx)("p",{children:"Always be up-to-date with recent activities in your project. our unique system of real-time push notifications will make sure you always know all about the recent developments."})]}),Object(F.jsx)("article",{children:Object(F.jsx)("img",{src:"https://cdn.dribbble.com/users/2851002/screenshots/7736965/media/e08e0676dd54ae8715c2d72bbdd51eb2.gif",alt:""})})]}),Object(F.jsx)("div",{className:"flex try-btn",children:Object(F.jsx)(l.b,{to:"/boards",className:"link",children:"Try Taskman!"})}),Object(F.jsx)("div",{className:"landing-page-header",children:Object(F.jsxs)(l.b,{to:"/boards",className:"link",children:["T",Object(F.jsx)("span",{children:"a"}),"skm",Object(F.jsx)("span",{children:"a"}),"n"]})})]})}n(463);function ze(e){var t=e.board,n=Object(o.c)(),c=function(){return Object(F.jsx)(l.b,{className:"link",style:{color:"black"},to:"/board/".concat(t._id),children:Object(F.jsx)("h4",{children:t.title})})};return Object(F.jsx)("div",{className:"board-link links",onClick:function(){return n(ae(t._id))},style:t.background?t.background.img?{backgroundImage:"url(".concat(t.background.img,")")}:{backgroundColor:t.background.color}:{backgroundColor:"white"},children:t.background&&t.background.img?Object(F.jsx)(l.b,{className:"link",to:"/board/".concat(t._id),children:Object(F.jsx)(Se.a,{src:t.background.img,crossOrigin:"anonymous",format:"hex",children:function(e){var n=e.data;return e.loading?Object(F.jsx)("div",{className:"preview-loader",children:"..."}):Object(F.jsx)("h4",{style:{color:n},children:t.title})}})}):Object(F.jsx)(c,{})},t._id)}n(464);function Ue(e){var t=e.boardListOp,n=Object(O.a)(),a=n.register,r=n.handleSubmit,s=n.reset,i=Object(c.useState)(null),o=Object(u.a)(i,2),l=o[0],d=o[1];return Object(F.jsxs)("ul",{className:"board-container",children:[t.boards.map((function(e){return Object(F.jsx)("li",{children:Object(F.jsx)(ze,{board:e},e._id)},e._id)})),Object(F.jsxs)("li",{className:"board-link add-board",children:[!l&&Object(F.jsx)("button",{onClick:function(){return d(!l)},children:"Create board"}),l&&Object(F.jsxs)("form",{onSubmit:r((function(e){t.addBoard(e.newBoardTitle),d(!l),s()})),children:[Object(F.jsx)("input",Object(m.a)(Object(m.a)({type:"text",id:"title",name:"title",autoComplete:"off"},a("newBoardTitle")),{},{placeholder:"Board name"})),Object(F.jsx)("button",{children:"Create board"})]})]})]})}n(465);function Fe(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.boardReducer.boards})),n=L.storage.loadUserFromStorage(),a=Object(d.f)();Object(c.useEffect)((function(){je.setup(),e(ae(null)),e(ne()),e(se(!0))}),[e]),Object(c.useEffect)((function(){n&&(e(I(n)),a.push("/boards"))}),[]);var r=function(){var n=Object(p.a)(f.a.mark((function n(c){var a;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(a=K.getEmptyBoard()).title=c,n.next=4,e(ce(a));case 4:t.push(a);case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();if(!t||!t.length)return Object(F.jsx)("div",{className:"loader-container",children:Object(F.jsx)("img",{src:z,alt:""})});var s={boards:t,addBoard:r};return Object(F.jsxs)("div",{className:"sub-container taskman-container",children:[Object(F.jsx)("h2",{children:"Your Workspace boards"}),Object(F.jsx)(Ue,{boardListOp:s})]})}var We=function(){var e=Object(o.c)(),t=Object(o.d)((function(e){return e.boardReducer.currBoard})),n=Object(o.d)((function(e){return e.boardReducer.background})),a=L.storage.loadUserFromStorage();return Object(c.useEffect)((function(){e(function(){var e=Object(p.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.query();case 2:n=e.sent,t({type:"SET_USERS",users:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(ne())}),[t]),Object(c.useEffect)((function(){a&&e(I(a))}),[]),Object(F.jsx)(l.a,{children:Object(F.jsxs)("div",{className:"App container",style:n?{backgroundColor:"white"}:t?t.background.color?{backgroundColor:t.background.color}:{backgroundImage:t.background.img?"url(".concat(t.background.img,")"):""}:{backgroundColor:"white"},children:[Object(F.jsx)(V,{}),Object(F.jsx)(i.b,{}),Object(F.jsxs)(d.c,{children:[Object(F.jsx)(d.a,{component:Re,path:"/board/:id?"}),Object(F.jsx)(d.a,{component:Fe,path:"/boards"}),Object(F.jsx)(d.a,{component:Pe,path:"/"})]})]})})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,498)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},qe=n(34),Ye=n(232),Ge={boards:[],currBoard:null,background:!1,setBackground:null,filterBy:null};var Ke={users:[],user:null};var He=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||qe.d,Xe=Object(qe.c)({boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(m.a)(Object(m.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(m.a)(Object(m.a)({},e),{},{currBoard:t.board});case"ADD_BOARD":return Object(m.a)(Object(m.a)({},e),{},{boards:[].concat(Object(q.a)(e.boards),[t.board])});case"REMOVE_BOARD":return Object(m.a)(Object(m.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"UPDATE_BOARD":var n=t.updatedBoard;return Object(m.a)(Object(m.a)({},e),{},{boards:e.boards.map((function(e){return e._id===n._id?n:e}))});case"UPDATE_BACKGROUND":return Object(m.a)(Object(m.a)({},e),{},{background:t.background});case"UPDATE_FILTERBY":return Object(m.a)(Object(m.a)({},e),{},{filterBy:t.filterBy});default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(m.a)(Object(m.a)({},e),{},{users:t.users});case"LOAD_USER":return Object(m.a)(Object(m.a)({},e),{},{user:t.user});case"UPDATE_USER":var n=t.updatedUser;return Object(m.a)(Object(m.a)({},e),{},{users:e.users.map((function(e){return e._id===n._id?n:e}))});default:return e}}}),Je=Object(qe.e)(Xe,He(Object(qe.a)(Ye.a)));s.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(o.a,{store:Je,children:Object(F.jsx)(We,{})})}),document.getElementById("root")),Ve()}},[[466,1,2]]]);
//# sourceMappingURL=main.22def3a5.chunk.js.map